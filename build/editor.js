this.window=this.window||{},this.window.Editor=function(e){"use strict";const t=Object.freeze(["source","sprites","maps","sounds","music","assets"]);class i{constructor(e,t){this.path=e,this.pluginInterface=t}get folders(){return this.path.split("/").slice(0,-1)}get fullPath(){return this.path}get fullName(){const e=this.path.split("/");return e[e.length-1]}get baseName(){const e=this.fullName.lastIndexOf(".");return-1===e?this.fullName:this.fullName.slice(0,e)}get extension(){const e=this.fullName.split(".");return e[e.length-1]}getPluginInterfacePath(){return`${this.folders.join("/")}/${this.baseName}`}async readContent(){return new Promise((e,t)=>{const i=this.getPluginInterfacePath();this.pluginInterface.readFile(i,(i,n)=>{void 0===n?e(i):t(n)})})}async writeContent(e){return new Promise((t,i)=>{const n=this.getPluginInterfacePath(),o={replace:"true",ext:this.extension};this.pluginInterface.writeFile(n,e,o,(e,n)=>{void 0===n?t(e):i(n)})})}}const n=class e{constructor({title:t,body:i,buttonOptions:n}={}){if(this.resolve=void 0,this.overlay=document.createElement("div"),this.overlay.className="modal-overlay",this.overlay.addEventListener("click",e=>{e.stopPropagation()}),this.element=document.createElement("div"),this.element.classList.add("modal"),void 0!==t){const e=document.createElement("div");e.classList.add("modal-header"),e.textContent=t,this.element.appendChild(e)}if(void 0!==i){const e=document.createElement("div");e.classList.add("modal-body"),"string"==typeof i?e.innerHTML=i:e.appendChild(i),this.element.appendChild(e)}const o=document.createElement("div");o.classList.add("modal-footer"),this.element.appendChild(o),n??=e.defaultButtonOptions;for(const e of n){const t=document.createElement("button");t.textContent=e.label,t.style.color="var(foreground-color-1)",t.style.backgroundColor=e.destructive?"var(--dark-invalid-color)":"var(--background-color-2)",t.addEventListener("click",()=>{this.close(e.value)}),o.appendChild(t)}this.overlay.appendChild(this.element)}prompt(){return document.querySelector("#editor").appendChild(this.overlay),new Promise(e=>{this.resolve=e})}close(e){this.overlay.remove(),this.resolve?.(e),this.resolve=void 0}};n.defaultButtonOptions=[{label:"Cancel",value:!1},{label:"Ok",value:!0}];let o=n;class r{getParent(){return this.parent}setParent(e){this.parent=e}linkElement(e){Object.defineProperty(e,"__node",{value:this,writable:!1,configurable:!1})}getSiblings(){if(void 0===this.parent)return[];const e=[];return this.parent.forEachChild(t=>{t!==this&&e.push(t)}),e}isDescendantOf(e){let t=this.parent;for(;void 0!==t;){if(t===e)return!0;t=t.parent}return!1}}class s extends r{constructor(){super(...arguments),this.children=[]}_intializeChildren(){this.children=[]}setParent(e){super.setParent(e),this.forEachChild(e=>{e.setParent(this)})}forEachChild(e){this.children.forEach(e)}getChildren(){return[...this.children]}countChildren(){return this.children.length}addChild(e,t=this.countChildren()){if(e===this)return;if(e instanceof s&&this.isDescendantOf(e))return;const i=e.getParent();if(void 0!==i&&i.removeChild(e),this.children.splice(t,0,e),e.setParent(this),0===t)return this;let n=this.children[t-1];for(;n instanceof u;){const e=n.getChildren();if(0===e.length)break;n=e[e.length-1]}return void 0===n?this:n}removeChild(e){const t=this.children.indexOf(e);return-1!==t&&(this.children.splice(t,1),e.setParent(void 0),!0)}}class a extends s{constructor(){super();const e=document.querySelector("#file-list");this.linkElement(e)}addChild(e,t=this.countChildren()){const i=super.addChild(e,t);if(void 0===i)return;if(i===this)return void document.querySelector("#file-list").prepend(...e.getSubtreeElements());const n=e.getSubtreeElements();i.getElement().after(...n)}removeChild(e){if(!super.removeChild(e))return!1;const t=e.getSubtreeElements();for(const i of t)i.remove();return!0}}class l extends r{constructor(e,t){super(),this.element=document.createElement("li"),this.element.setAttribute("draggable","true"),this.element.classList.add("file"),this.element.addEventListener("click",e=>{e.stopPropagation(),this.onClick()}),this.icon=document.createElement("div"),this.icon.innerHTML=t,this.element.appendChild(this.icon),this.label=document.createElement("div"),this.label.classList.add("label"),this.label.textContent=e,this.element.appendChild(this.label),this.label.addEventListener("dblclick",e=>{e.stopPropagation(),this.beginRenaming()}),this.delete=document.createElement("div"),this.delete.classList.add("delete"),this.delete.innerHTML='<i class="fa-solid fa-trash"></i>',this.element.appendChild(this.delete),this.delete.addEventListener("click",e=>{e.stopPropagation(),this.requestDeletion(!0)}),this.linkElement(this.element)}getName(){return this.label.textContent}setName(e){this.label.textContent=e}getIcon(){return this.icon.innerHTML}setIcon(e){this.icon.innerHTML=e}getHidden(){return this.element.classList.contains("hidden")}setHidden(e){this.element.classList.toggle("hidden",e)}getBaseName(){return this.getName()}getExtension(){}getElement(){return this.element}getSubtreeElements(){return[this.element]}setParent(e){super.setParent(e);let t=0,i=this.parent;for(;void 0!==i;){if(i instanceof u&&(i.getExpanded()||this.setHidden(!0)),i instanceof a){this.element.style.paddingLeft=16+16*t+"px";break}i=i.getParent(),++t}}onClick(){}onDelete(){const e=this.getParent();void 0!==e&&e.removeChild(this)}scrollIntoView(){this.element.scrollIntoView({block:"nearest",inline:"center",behavior:"auto"})}beginRenaming(){if(this.element.classList.contains("renaming"))return;this.element.classList.add("renaming");const e=document.createElement("div");e.classList.add("rename-wrapper");const t=document.createElement("input");t.type="text",t.maxLength=255,t.value=this.getBaseName(),t.classList.add("rename"),e.appendChild(t);const i=this.getExtension();if(void 0!==i){const t=document.createElement("span");t.textContent=i,t.classList.add("extension"),e.appendChild(t)}this.label.replaceWith(e),t.focus(),t.select();let n=!1;const o=document.querySelector("#file-error"),r=document.querySelector("#file-list"),s=e=>{const t=this.element.getBoundingClientRect(),i=r.getBoundingClientRect();o.textContent=e,o.style.top=t.bottom-i.top+"px",o.hidden=!1},a=()=>{o.hidden=!0},d=()=>{const e=t.value.trim();""!==e&&this.setName(e+(i??"")),c()},c=()=>{n||(n=!0,a(),e.replaceWith(this.label),this.element.classList.remove("renaming"))};t.addEventListener("input",()=>{const e=t.value.trim();if(""!==e)if("."!==e[e.length-1])if(/[\/\\\0<>:"|?*]/.test(e))s(`Cannot name file "${e}": File name contains invalid characters`);else{for(const t of this.getSiblings())if(t instanceof l&&t.getName()===e+(i??""))return void s(`Cannot name file "${e}": File with same name already exists in folder`);a()}else s(`Cannot name file "${e}": File name cannot end with "."`);else s("Cannot have an empty file name")}),t.addEventListener("keydown",e=>{"Enter"===e.key&&o.hidden&&d(),"Escape"===e.key&&c()}),t.addEventListener("blur",()=>{o.hidden?d():c()})}async requestDeletion(e){if(!e)return this.onDelete(),!0;const t=new o({title:"Delete Item",body:`\n                                Are you sure you want to delete <code>${this.getName()}</code>\n                                and all of its contents? This action is irreversible.\n                        `,buttonOptions:[{label:"Cancel",value:!1},{label:"Delete",destructive:!0,value:!0}]});return!!(await t.prompt())&&(this.onDelete(),!0)}}const d=class e extends l{constructor(t){switch(t.extension){case"ms":case"js":case"py":case"lua":super(t.fullName,'<i class="fa-solid fa-file-code"></i>');break;case"png":case"jpg":case"jpeg":super(t.fullName,'<i class="fa-solid fa-file-image"></i>');break;case"map":super(t.fullName,'<i class="fa-regular fa-map"></i>');break;case"wav":super(t.fullName,'<i class="fa-solid fa-file-audio"></i>');break;case"mp3":super(t.fullName,'<i class="fa-solid fa-music"></i>');break;case"md":case"json":case"txt":super(t.fullName,'<i class="fa-solid fa-file"></i>');break;default:super(t.fullName,'<i class="fa-solid fa-question"></i>')}this.context=t,this.tab=document.createElement("li"),this.tab.setAttribute("draggable","true"),this.tab.classList.add("tab"),this.tabIcon=document.createElement("div"),this.tabIcon.innerHTML=this.getIcon(),this.tab.appendChild(this.tabIcon),this.tabLabel=document.createElement("span"),this.tabLabel.classList.add("label"),this.tabLabel.textContent=t.fullName,this.tab.appendChild(this.tabLabel),this.tabIndicator=document.createElement("div"),this.tabIndicator.classList.add("indicator"),this.tabIndicator.innerHTML=e.CLOSE_INDICATOR,this.tab.appendChild(this.tabIndicator),this.tab.addEventListener("click",e=>{e.stopPropagation(),_(this)}),this.tabIndicator.addEventListener("click",async e=>{if(e.stopPropagation(),this.tab.classList.contains("unsaved")){const e=new o({title:"Unsaved Changes",body:`\n                                                Do you want to save changes you made to "${this.getName()}"?\n                                                Your changes will be lost if you close the file with unsaved changes.\n                                        `,buttonOptions:[{label:"Cancel",value:0},{label:"Save",value:1},{label:"Don't Save",destructive:!0,value:2}]});if(0===await e.prompt())return}this.tab.remove(),O(this)})}setUnsaved(t){this.tab.classList.toggle("unsaved",t),this.tabIndicator.innerHTML=t?e.UNSAVED_INDICATOR:e.CLOSE_INDICATOR}getContext(){return this.context}setName(e){super.setName(e),this.tabLabel.textContent=e}getBaseName(){return f(this.getName()).baseName}getExtension(){return f(this.getName()).extension}onClick(){_(this)}select(e){const t=document.querySelector("#tab-list");t.contains(this.tab)||(t.appendChild(this.tab),void 0!==e&&e.tab.after(this.tab),this.tab.scrollIntoView({block:"nearest",inline:"center",behavior:"auto"})),this.getElement().classList.add("selected"),this.tab.classList.add("selected")}onDelete(){O(this),this.tab.remove(),super.onDelete()}};d.CLOSE_INDICATOR='<i class="fa-solid fa-xmark"></i>',d.UNSAVED_INDICATOR='<i class="fa-solid fa-asterisk"></i>';let c=d;const h=class e extends l{constructor(t){super(t,e.CLOSED_ICON),this.expanded=!1,this._intializeChildren()}setParent(e){s.prototype.setParent.call(this,e),l.prototype.setParent.call(this,e)}addChild(e,t=this.countChildren()){const i=s.prototype.addChild.call(this,e,t);if(void 0===i)return;if(!(i instanceof l))return;const n=e.getSubtreeElements();i.getElement().after(...n),this.setDescendantsVisibility(this.expanded)}removeChild(e){if(!s.prototype.removeChild.call(this,e))return!1;const t=e.getSubtreeElements();for(const i of t)i.remove();return!0}onDelete(){this.forEachChild(e=>{e instanceof l&&e.onDelete()}),l.prototype.onDelete.call(this)}onClick(){this.expanded=!this.expanded,this.setIcon(this.expanded?e.OPEN_ICON:e.CLOSED_ICON),this.setDescendantsVisibility(this.expanded)}getExpanded(){return this.expanded}setDescendantsVisibility(t){this.forEachChild(i=>{i instanceof l&&(i.setHidden(!t),i instanceof e&&i.setDescendantsVisibility(t&&i.getExpanded()))})}getSubtreeElements(){const e=l.prototype.getSubtreeElements.call(this);return this.forEachChild(t=>{if(!(t instanceof l))return;const i=t.getSubtreeElements();e.push(...i)}),e}};h.CLOSED_ICON='<i class="fa-solid fa-folder"></i>',h.OPEN_ICON='<i class="fa-solid fa-folder-open"></i>';let u=h;(()=>{for(const e of Object.getOwnPropertyNames(s.prototype)){if(Object.prototype.hasOwnProperty.call(u.prototype,e))continue;const t=Object.getOwnPropertyDescriptor(s.prototype,e);Object.defineProperty(u.prototype,e,t??Object.create(null))}})();const p=class e{constructor(e,t){this.draggedElement=e,this.onFinish=t}setReceivingElement(e){e!==this.receivingElement&&void 0!==this.folderOpenTimeout&&(clearTimeout(this.folderOpenTimeout),this.folderOpenTimeout=void 0),this.receivingElement=e,document.querySelector("#file-drop-line").classList.toggle("active",void 0!==e)}setDropPosition(e){this.dropPosition!==e&&void 0!==this.folderOpenTimeout&&(clearTimeout(this.folderOpenTimeout),this.folderOpenTimeout=void 0),this.dropPosition=e}dragStart(e){this.draggedElement.classList.add("dragging"),null!==e.dataTransfer&&(e.dataTransfer.effectAllowed="move",e.dataTransfer.setData("text/plain","ignored"))}dragEnd(e){document.querySelector("#file-drop-line").classList.remove("active"),this.draggedElement.classList.remove("dragging"),this.onFinish?.()}dragOver(t){if(null===t.target||!(t.target instanceof HTMLElement))return;const i=document.querySelector("#file-list"),n=document.querySelector("#file-drop-line"),o=i.getBoundingClientRect(),r=t.target.closest(".file:not(.hidden)");if(null===r){let e=i.lastElementChild;for(;e instanceof HTMLElement&&e.__node instanceof l&&e.__node.getHidden();)e=e.previousElementSibling;const r=e?.__node;if(e===this.draggedElement&&r?.getParent()===i.__node||this.draggedElement.__node instanceof u&&this.draggedElement.__node.getParent()===i.__node&&r?.isDescendantOf(this.draggedElement.__node))return void this.setReceivingElement(void 0);const s=e?.getBoundingClientRect();return t.clientY>s.bottom?(t.preventDefault(),null!==t.dataTransfer&&(t.dataTransfer.dropEffect="move"),n.style.top=s.bottom-o.top+"px",n.style.width=`${s.width}px`,void this.setReceivingElement(i)):void this.setReceivingElement(void 0)}if(r===this.draggedElement||this.draggedElement.__node instanceof u&&r.__node?.isDescendantOf(this.draggedElement.__node))return void this.setReceivingElement(void 0);t.preventDefault(),null!==t.dataTransfer&&(t.dataTransfer.dropEffect="move"),this.setReceivingElement(r);const s=r.getBoundingClientRect(),a=t.clientY<s.top+s.height/2;this.setDropPosition(a?2:3),n.style.top=a?s.top-o.top+"px":s.bottom-o.top+"px",n.style.width=`${s.width}px`,r.__node instanceof u&&r.__node.getExpanded()&&!a&&void 0===this.folderOpenTimeout&&(this.folderOpenTimeout=setTimeout(()=>{r.__node.onClick(),this.folderOpenTimeout=void 0},e.FOLDER_HOVER_OPEN_DELAY))}dragLeave(e){const t=document.querySelector("#file-list");e.relatedTarget instanceof Node&&t.contains(e.relatedTarget)||this.setReceivingElement(void 0)}drop(e){if(void 0===this.receivingElement?.__node)return;e.preventDefault();const t=document.querySelector("#file-list");if(this.receivingElement===t){const e=this.receivingElement.__node;let t=e.countChildren();return e.getChildren().includes(this.draggedElement.__node)&&--t,void this.confirmDrop(e,t)}if(this.receivingElement.__node instanceof u&&this.receivingElement.__node.getExpanded()&&3===this.dropPosition)return void this.confirmDrop(this.receivingElement.__node,0);const i=this.receivingElement.__node.getParent();if(void 0===i)return;const n=i.getChildren();let o=n.indexOf(this.receivingElement.__node);3===this.dropPosition&&++o,n.includes(this.draggedElement.__node)&&n.indexOf(this.draggedElement.__node)<o&&--o,this.confirmDrop(i,o)}async confirmDrop(e,t){let i,n=!1;const r=e.getChildren();if(!r.includes(this.draggedElement.__node)){const e=this.draggedElement.__node.getName();for(const t of r)if(t instanceof l&&t.getName()===e){const r=new o({title:"Cannot Move Item",body:`An item in this folder already has the name <code>${e}</code>.`,buttonOptions:[{label:"Cancel",value:0},{label:"Rename",value:1},{label:"Replace",destructive:!0,value:2}]}),s=await r.prompt();if(0===s)return;1===s&&(n=!0),2===s&&(i=t);break}}const s=this.draggedElement.__node;if(e.addChild(s,t),void 0!==i&&i.requestDeletion(!1),n){const e=s.getBaseName(),t=s.getExtension();let i="",n=0,o=!0;for(;o;){++n,o=!1,i=`${e} (${n})${t}`;for(const e of r)if(e instanceof l&&e.getName()===i){o=!0;break}}s.setName(i),s.beginRenaming()}}};p.FOLDER_HOVER_OPEN_DELAY=500;let m=p;function f(e){const t={baseName:e},i=e.lastIndexOf(".");return-1!==i&&(t.baseName=e.slice(0,i),t.extension=e.slice(i)),Object.freeze(t)}var v=(e=>(e[e.FILE_OPENED=0]="FILE_OPENED",e[e.FILE_CLOSED=1]="FILE_CLOSED",e))(v||{});const g=new Map;function b(e,t){const i=g.get(e)??[];i.push(t),g.set(e,i)}function y(e,t){const i=g.get(e)??[];for(const n of i)n(t)}const w=[];let x,E,C;function L(e){for(let t=w.length-1;t>=0;--t)w[t]===e&&w.splice(t,1)}function k(){const e=document.querySelector("#file-list"),t=document.querySelector("#tab-list"),i=e.querySelectorAll(".selected"),n=t.querySelectorAll(".selected");for(const o of[...i,...n])o.classList.remove("selected")}function _(e){x!==e&&(void 0!==x&&(L(x),w.push(x)),k(),e.select(x),x=e,y(0,x))}function O(e){if(L(e),y(1,e),x!==e)return;k();const t=x;x=w.pop(),void 0!==x&&(x.select(t),y(0,x))}const S=document.createElement("div");let N;S.classList.add("monaco-wrapper");const P=120;let D,z,I;const q=240;let M,T,$,R,j;function H(e,t,i){const n=document.querySelector("#left-panel"),o=document.querySelector("#center-panel"),r=document.querySelector("#right-panel"),s=document.querySelector("#left-handle"),a=document.querySelector("#right-handle");z=e,T=i,n.style.width=`${e}px`,s.style.left=`${e}px`,o.style.left=`${e}px`,o.style.width=`${t}px`,a.style.left=`${e+t}px`,r.style.width=`${i}px`,r.style.left=`${e+t}px`}function A(e,t){const i=document.querySelector("#top-panel"),n=document.querySelector("#bottom-panel"),o=document.querySelector("#top-container"),r=document.querySelector("#bottom-container"),s=document.querySelector("#middle-handle");R=e,i.style.height=`${e}px`,o.style.height=`calc(${e}px - var(--bar-size))`,s.style.top=`${e}px`,n.style.top=`${e}px`,n.style.height=`${t}px`,r.style.top=`calc(${e}px + var(--bar-size))`,r.style.height=`calc(${t}px - var(--bar-size))`}let F,V,B,W=!0,Y=!0;function U(e){if(e===F)return;if(F=e,D=.3*e,I=.5*e,M=.5*e,W){const t=P+.3*(D-P);return void H(t,Math.max(240,Math.min(I,(e-t)/2)),Math.max(q,Math.min(M,(e-t)/2)))}const t=document.querySelector("#editor"),i=Math.max(P,Math.min(D,z)),n=Math.max(q,Math.min(M,T)),o=t.clientWidth-i-n,r=Math.max(240,Math.min(I,o)),s=t.clientWidth-i-n-r;H(i,r,Math.max(q,Math.min(M,n+s)))}function X(e){if(e===V)return;if(V=e,$=.7*e,j=.7*e,Y){const t=Math.max(240,Math.min($,e/2));return void A(t,Math.max(240,Math.min(j,e-t)))}const t=Math.max(240,Math.min($,R));A(t,e-t)}let K=0,G=0;document.addEventListener("mousemove",e=>{if(void 0===B)return;const t=document.querySelector("#editor");if(0===B){const i=e.clientX-K,n=Math.max(P,Math.min(D,G+i));H(n,t.clientWidth-n-T,T)}if(1===B){const i=K-e.clientX,n=Math.max(q,Math.min(M,G+i)),o=t.clientWidth-z-n;H(z,o,n)}if(2===B){const i=e.clientY-K,n=Math.max(240,Math.min($,G+i));A(n,t.clientHeight-n)}}),document.addEventListener("mouseup",()=>{void 0!==B&&(B=void 0,document.body.style.userSelect="",document.body.style.cursor="")});class J{constructor(e){this.file=e,this.context=e.getContext(),this.wrapper=document.createElement("div"),this.wrapper.classList.add("view-wrapper")}present(){document.querySelector("#center-container").appendChild(this.wrapper)}dismiss(){this.wrapper.remove()}dispose(){this.dismiss()}}class Q extends J{constructor(e){super(e),this.savedCode="",this.instance=N,this.model=window.monaco.editor.createModel(this.savedCode,"javascript"),this.model.onDidChangeContent(()=>{const e=this.model.getValue();this.file.setUnsaved(e!==this.savedCode)}),this.saveEventListener=e=>{const t=e.key??String.fromCharCode(e.keyCode);(e.ctrlKey||e.metaKey)&&"s"===t.toLowerCase()&&(e.preventDefault(),this.writeContent())},this.loadContent()}async loadContent(){const e=await this.context.readContent();this.savedCode=e,this.model.setValue(this.savedCode)}async writeContent(){const e=this.model.getValue();e!==this.savedCode&&(await this.context.writeContent(e),this.savedCode=e,this.file.setUnsaved(!1))}present(){super.present(),this.wrapper.appendChild(S),this.instance.setModel(this.model),document.addEventListener("keydown",this.saveEventListener)}dismiss(){super.dismiss(),document.removeEventListener("keydown",this.saveEventListener)}dispose(){super.dispose(),this.model.dispose()}}let Z=!1;return e.setupEditor=async function(e,n){if(Z)return;Z=!0,await async function(){await new Promise((e,t)=>{const i=document.createElement("script");i.src="https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs/loader.js",i.onload=e,i.onerror=t,document.head.appendChild(i)}),await new Promise((e,t)=>{window.require.config({paths:{vs:"https://cdn.jsdelivr.net/npm/monaco-editor@0.45.0/min/vs"}}),window.require(["vs/editor/editor.main"],e,t)}),N=window.monaco.editor.create(S,{automaticLayout:!0,theme:"vs-dark"})}();const o=document.createElement("script");o.src="https://kit.fontawesome.com/03b601dbb5.js",o.crossOrigin="anonymous",o.defer=!0,document.head.appendChild(o);const r=document.createElement("style");r.textContent='@import"https://fonts.googleapis.com/css2?family=Inter:ital,opsz,wght@0,14..32,100..900;1,14..32,100..900&display=swap";.editor{--opacity-1: .87;--opacity-2: .6;--opacity-3: .38;--background-color-1: #141f25;--background-color-2: #375464;--interaction-color: #263A45;--dark-invalid-color: #ce2317;--light-invalid-color: #db6464;--foreground-color-1: rgba(255, 255, 255, var(--opacity-1));--foreground-color-2: rgba(255, 255, 255, var(--opacity-2));--foreground-color-3: rgba(255, 255, 255, var(--opacity-3));--handle-size: 10px;--bar-size: 40px;font-family:Inter,monospace;background-color:var(--background-color-1);color:var(--foreground-color-1);overflow:hidden;box-sizing:border-box;position:relative;width:100%;height:100%;margin:0;padding:0;z-index:1}.editor *{box-sizing:border-box;padding:0;margin:0}.editor *::-webkit-scrollbar{width:var(--handle-size);height:var(--handle-size)}.editor *::-webkit-scrollbar-track{background:#394144;border-radius:calc(var(--handle-size) / 2)}.editor *::-webkit-scrollbar-thumb{background:#777c80;border-radius:calc(var(--handle-size) / 2)}.editor *::-webkit-scrollbar-thumb:hover{background:#bbbec0}.editor code,.editor pre{font-family:monospace;background-color:var(--background-color-2);padding:2px 4px;border-radius:2px}.editor .top-border{border-top:1px solid var(--background-color-2)}.editor .bottom-border{border-bottom:1px solid var(--background-color-2)}.editor .left-border{border-left:1px solid var(--background-color-2)}.editor .right-border{border-right:1px solid var(--background-color-2)}.horizontal-panel{left:0;width:100%;overflow:hidden;position:absolute;z-index:2}.horizontal-handle{left:0;width:100%;position:absolute;height:var(--handle-size);transform:translateY(-5px);background:transparent;cursor:ns-resize;touch-action:none;overflow:hidden;z-index:3}.horizontal-bar{left:0;overflow:none;position:absolute;height:var(--bar-size);width:100%}.vertical-panel{top:0;height:100%;overflow:hidden;position:absolute;z-index:2}.vertical-handle{top:0;height:100%;position:absolute;width:var(--handle-size);transform:translate(-5px);background:transparent;cursor:ew-resize;touch-action:none;overflow:hidden;z-index:3}.container{overflow:hidden;position:absolute}.file-tree{width:100%;height:100%;overflow:none;position:relative}.file-list{width:100%;height:100%;list-style:none;overflow-x:hidden;overflow-y:auto;padding-bottom:var(--bar-size)}.file{font-size:small;width:100%;cursor:pointer;display:flex;gap:8px;padding:8px 16px;background-color:var(--background-color-1)}.file:hover{background-color:var(--interaction-color)}.file.hidden{display:none}.file.selected{background-color:var(--background-color-2)}.file.dragging{opacity:var(--opacity-3)}.file .label{width:100%;height:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.file .rename-wrapper{width:100%;height:100%;display:flex}.file .rename-wrapper input.rename{width:100%;height:100%;border:none;outline:none;color:inherit;font-family:inherit;background-color:transparent;border-bottom:2px solid var(--foreground-color-3)}.file .rename-wrapper .extension{height:100%;pointer-events:none;color:var(--foreground-color-2);font-weight:400}.file .delete{display:initial;opacity:0}.file:hover:not(.dragging) .delete{opacity:var(--opacity-3)}.file:hover:not(.dragging) .delete:hover{opacity:var(--opacity-1)}.file.renaming .delete{display:none}.file-error{position:absolute;left:0;right:0;background:var(--background-color-1);border:1px solid var(--light-invalid-color);overflow-wrap:break-word;border-radius:4px;padding:8px;font-size:x-small;color:var(--light-invalid-color);z-index:10}.file-drop-line{left:0;height:2px;position:absolute;background-color:var(--background-color-2);pointer-events:none;overflow:hidden;opacity:0}.file-drop-line.active{opacity:1}.tab-bar{width:100%;height:100%;overflow:none;position:relative}.tab-list{width:100%;height:100%;overflow-x:auto;overflow-y:hidden;display:flex;list-style:none;padding-right:var(--bar-size)}.tab{font-size:small;min-width:120px;max-width:360px;height:100%;cursor:pointer;display:flex;align-items:center;gap:8px;padding:4px 8px;background-color:var(--background-color-1);border-right:1px solid var(--background-color-2)}.tab:hover{background-color:var(--interaction-color)}.tab.selected{background-color:var(--background-color-2)}.tab.dragging{opacity:var(--opacity-3)}.tab .label{width:100%;white-space:nowrap;overflow:hidden;text-overflow:ellipsis;flex:1}.tab .indicator{opacity:0}.tab:hover:not(.dragging) .indicator{opacity:var(--opacity-3)}.tab:hover:not(.dragging) .indicator:hover{opacity:var(--opacity-1)}.tab.selected:not(.dragging) .indicator{opacity:var(--opacity-1)}.tab.unsaved:not(.selected) .indicator{opacity:var(--opacity-3)}.tab.unsaved.selected .indicator,.tab.unsaved.hover .indicator{opacity:var(--opacity-1)}.tab-drop-line{top:0;width:2px;position:absolute;background-color:var(--background-color-2);pointer-events:none;overflow:hidden;opacity:0}.tab-drop-line.active{opacity:1}.view-wrapper{width:100%;height:100%;overflow:hidden;position:relative}.monaco-wrapper{width:100%;height:100%;position:absolute;top:0;left:0;overflow:hidden}.modal-overlay{position:fixed;top:0;left:0;width:100vw;height:100vh;background-color:#00000080;display:flex;align-items:center;justify-content:center;z-index:10000}.modal{background-color:var(--background-color-1);color:var(--text-color);border-radius:6px;padding:24px;min-width:300px;max-width:90vw;display:flex;flex-direction:column;gap:16px}.modal-header{font-size:large;font-weight:700}.modal-footer{display:flex;justify-content:flex-end;gap:12px}.modal-footer button{padding:6px 12px;border-radius:2px;cursor:pointer;color:inherit;border:none}',document.head.appendChild(r),e.innerHTML='<div id="editor" class="editor">\r\n        <div id="left-panel" class="vertical-panel right-border">\r\n                <div id="left-top-bar" class="horizontal-bar bottom-border"></div>\r\n                <div id="left-container" class="container">\r\n                        <div id="file-tree" class="file-tree">\r\n                                <ul id="file-list" class="file-list"></ul>\r\n                                <div id="file-error" class="file-error"></div>\r\n                                <div id="file-drop-line" class="file-drop-line"></div>\r\n                        </div>\r\n                </div>\r\n        </div>\r\n        <div id="left-handle" class="vertical-handle"></div>\r\n        <div id="center-panel" class="vertical-panel">\r\n                <div id="center-top-bar" class="horizontal-bar bottom-border">\r\n                        <div id="tab-bar" class="tab-bar">\r\n                                <ul id="tab-list" class="tab-list"></ul>\r\n                                <div id="tab-drop-line" class="tab-drop-line"></div>\r\n                        </div>\r\n                </div>\r\n                <div id="center-container" class="container"></div>\r\n        </div>\r\n        <div id="right-handle" class="vertical-handle"></div>\r\n        <div id="right-panel" class="vertical-panel left-border">\r\n                <div id="top-panel" class="horizontal-panel bottom-border">\r\n                        <div id="top-top-bar" class="horizontal-bar bottom-border"></div>\r\n                        <div id="top-container" class="container"></div>\r\n                </div>\r\n                <div id="middle-handle" class="horizontal-handle"></div>\r\n                <div id="bottom-panel" class="horizontal-panel">\r\n                        <div id="bottom-top-bar" class="horizontal-bar bottom-border"></div>\r\n                        <div id="bottom-container" class="container"></div>\r\n                </div>\r\n        </div>\r\n</div>',function(){const e=document.querySelector("#left-container");e.style.left="0",e.style.top="var(--bar-size)",e.style.width="100%",e.style.height="calc(100% - var(--bar-size))";const t=document.querySelector("#center-container");t.style.left="0",t.style.top="var(--bar-size)",t.style.width="100%",t.style.height="calc(100% - var(--bar-size))";const i=document.querySelector("#top-container");i.style.left="0",i.style.top="var(--bar-size)",i.style.width="100%";const n=document.querySelector("#bottom-container");n.style.left="0",n.style.top="var(--bar-size)",n.style.width="100%";const o=document.querySelector("#editor");new ResizeObserver(e=>{for(const t of e)t.target===o&&(U(o.clientWidth),X(o.clientHeight))}).observe(o),U(o.clientWidth),X(o.clientHeight);const r=document.querySelector("#left-handle"),s=document.querySelector("#right-handle"),a=document.querySelector("#middle-handle");r.addEventListener("mousedown",e=>{document.body.style.userSelect="none",document.body.style.cursor="ew-resize",W=!1,B=0,G=z,K=e.clientX}),s.addEventListener("mousedown",e=>{document.body.style.userSelect="none",document.body.style.cursor="ew-resize",W=!1,B=1,G=T,K=e.clientX}),a.addEventListener("mousedown",e=>{document.body.style.userSelect="none",document.body.style.cursor="ns-resize",Y=!1,B=2,G=R,K=e.clientY})}(),E=new a,document.addEventListener("dragstart",e=>{if(void 0!==C||!(e.target instanceof Element))return;const t=e.target.closest(".file:not(.hidden):not(.dragging):not(.renaming)"),i=e.target.closest(".tab:not(.dragging)");null===t!=(null===i)&&(null!==t&&(C=new m(t,()=>{C=void 0})),null!==i&&(C=new m(i,()=>{C=void 0})),C.dragStart(e))}),document.addEventListener("dragend",e=>{C?.dragEnd(e)}),document.addEventListener("dragover",e=>{C?.dragOver(e)}),document.addEventListener("dragleave",e=>{C?.dragLeave(e)}),document.addEventListener("drop",e=>{C?.drop(e)});const s=new Map;let l;b(v.FILE_OPENED,e=>{if(e instanceof c){if(l?.dismiss(),!s.has(e)){const t=new Q(e);s.set(e,t)}l=s.get(e),l?.present()}}),b(v.FILE_CLOSED,e=>{if(!(e instanceof c))return;const t=s.get(e);void 0!==t&&(t===l&&(l=void 0,t.dismiss()),s.delete(e),t.dispose())}),await async function(e){const n=await async function(e){return(await Promise.all(t.map(t=>new Promise((i,n)=>{e.listFiles(t,(e,t)=>{i(void 0===t?e:[])})})))).flat().map(t=>{const n=`${t.path}.${t.ext}`;return new i(n,e)})}(e),o=n.find(e=>"assets/__editor"===e.fullPath&&"json"===e.extension),r=E,s=new Map;function a(e){let t,i="";for(const n of e.folders){i=""===i?n:`${i}/${n}`;let e=s.get(i);void 0===e&&(e=new u(n),s.set(i,e),(t??r).addChild(e)),t=e}return t}for(const t of n){if(t===o)continue;const e=a(t);if(void 0===e)continue;const i=new c(t);e.addChild(i)}}(n)},Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),e}({});